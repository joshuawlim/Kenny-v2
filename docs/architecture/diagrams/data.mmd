%% Logical data model for Kenny v2 (simplified)
erDiagram
  CONTACT ||--o{ MESSAGE : sends_receives
  CONTACT ||--o{ EVENT : attends
  MESSAGE ||--o{ MEMORY : summarized_into
  MESSAGE ||--o{ EMBEDDING : has
  PLAN ||--o{ STEP : contains

  CONTACT {
    string id
    string displayName
    string channelHandle
  }

  MESSAGE {
    string id
    datetime timestamp
    string channel (web|telegram|whatsapp|imessage|mail)
    string direction (inbound|outbound)
    text content
  }

  EVENT {
    string id
    datetime start
    datetime end
    string title
    string location
    string status (proposed|approved|declined)
  }

  MEMORY {
    string id
    string type (task|reminder|preference)
    text content
  }

  EMBEDDING {
    string id
    string model
    vector values
  }

  PLAN {
    string id
    string requestId
    string status (planned|running|completed|failed)
  }

  STEP {
    string id
    string planId
    string agentId
    string capabilityVerb
    string status (queued|running|succeeded|failed|skipped)
    datetime startedAt
    datetime finishedAt
  }